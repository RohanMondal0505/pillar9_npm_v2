import{s as e,_ as n,B as a,a as o,D as t,I as d,b as r,c as l,d as s}from"./index-DyP4ojMg.js";import*as i from"react";import{useState as u,useRef as _,useEffect as m}from"react";import{B as c,R as h,a as D,G as b}from"./index-B4sptC2-.js";import{toast as g}from"react-toastify";import{C as f,P as p}from"./PlusButton-C6vAdZ0N.js";import"localstorage-slim";import"react-redux";import"axios";import"react-dom";var v={Dashboard:"Dashboard-module_Dashboard__0DvAN",Top:"Dashboard-module_Top__f0DSh",Buttons:"Dashboard-module_Buttons__rp7JA",WidgetButtons:"Dashboard-module_WidgetButtons__DEolH",WidgetBtn:"Dashboard-module_WidgetBtn__mYS7B",CrossButton:"Dashboard-module_CrossButton__AbF4P",Widgets:"Dashboard-module_Widgets__SPHnD",gridItem:"Dashboard-module_gridItem__6LgaG",ActionButtons:"Dashboard-module_ActionButtons__y5f81",Right:"Dashboard-module_Right__iotmt",Menu:"Dashboard-module_Menu__2kZ0r",CustomMenu:"Dashboard-module_CustomMenu__7eeyk",Content:"Dashboard-module_Content__Hibyd",Collapse:"Dashboard-module_Collapse__kaq9v"};e(".Dashboard-module_Dashboard__0DvAN {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Top__f0DSh {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Top__f0DSh h2 {\n  font-family: Poppins;\n  font-size: 2rem;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 2.25rem; /* 150% */\n  letter-spacing: 0.01em;\n  text-align: left;\n  color: #e6d366;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Top__f0DSh .Dashboard-module_Buttons__rp7JA {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Top__f0DSh .Dashboard-module_Buttons__rp7JA button {\n  border-radius: 0.5rem;\n  background: var(--Ellipse-30, #e6d366);\n  display: inline-flex;\n  height: 3.5rem;\n  padding: 0.75rem 2.625rem;\n  justify-content: center;\n  align-items: center;\n  gap: 0.625rem;\n  flex-shrink: 0;\n  color: #fff;\n  font-family: Poppins;\n  font-size: 1rem;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 1.25rem; /* 125% */\n  cursor: pointer;\n  border: none;\n  transition: all ease-in-out 0.3s;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Top__f0DSh .Dashboard-module_Buttons__rp7JA button:hover {\n  opacity: 0.75;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  gap: 2.5rem;\n  flex-wrap: wrap;\n  row-gap: 1.5rem;\n  margin-top: 1rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH .Dashboard-module_WidgetBtn__mYS7B {\n  display: flex;\n  height: 3rem;\n  padding: 0.75rem 2.625rem;\n  justify-content: center;\n  align-items: center;\n  gap: 0.625rem;\n  align-self: stretch;\n  border-radius: 0.5rem;\n  border: 1px solid #ece9f1;\n  position: relative;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH .Dashboard-module_WidgetBtn__mYS7B .Dashboard-module_CrossButton__AbF4P {\n  width: 2.125rem;\n  height: 2.0625rem;\n  background: rgba(17, 17, 17, 0.05);\n  flex-shrink: 0;\n  position: absolute;\n  right: -1rem;\n  top: -1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH .Dashboard-module_WidgetBtn__mYS7B .Dashboard-module_CrossButton__AbF4P img {\n  width: 1.05rem;\n  height: 1.05rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH .Dashboard-module_WidgetBtn__mYS7B span {\n  width: 1.5rem;\n  height: 1.5rem;\n  cursor: pointer;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_WidgetButtons__DEolH .Dashboard-module_WidgetBtn__mYS7B span img {\n  width: 100%;\n  height: 100%;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG {\n  background-color: rgba(160, 201, 201, 0.068);\n  display: flex;\n  flex-direction: column;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 {\n  padding: 0.7rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(49, 51, 51, 0.151);\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt span {\n  cursor: pointer;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt .Dashboard-module_Menu__2kZ0r {\n  position: relative;\n  display: inline-block;\n  cursor: pointer;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt .Dashboard-module_CustomMenu__7eeyk {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  background: white;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n  z-index: 100;\n  min-width: 120px; /* Adjust the width as needed */\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt .Dashboard-module_CustomMenu__7eeyk li {\n  padding: 0.6rem 0.8rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem; /* Space between icon and text */\n  opacity: 1 !important;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt .Dashboard-module_CustomMenu__7eeyk li:hover {\n  background: #f5f5f5;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_ActionButtons__y5f81 .Dashboard-module_Right__iotmt .Dashboard-module_CustomMenu__7eeyk li svg {\n  font-size: 1rem;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_Content__Hibyd {\n  flex: 1;\n  background-color: rgba(43, 40, 40, 0.048);\n  transition: all ease-in-out 0.3s;\n  transform-origin: top;\n  display: flex;\n  overflow: hidden;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_Content__Hibyd img {\n  width: 100%;\n  height: 100%;\n}\n.Dashboard-module_Dashboard__0DvAN .Dashboard-module_Widgets__SPHnD .Dashboard-module_gridItem__6LgaG .Dashboard-module_Content__Hibyd.Dashboard-module_Collapse__kaq9v {\n  transform: scaleY(0);\n}");var y=function(e){var d=e.item,r=e.index,l=e.onWidgetStateChange,s=e.setIsFullScreen,_=u(d.isCollapsed),m=n(_,2),b=m[0],g=m[1],f=u(d.isLocked),p=n(f,2),y=p[0],E=p[1],w=u(!1),B=n(w,2),A=B[0],C=B[1],N=function(e){C(!1),E(e),l(r,"isLocked",e)},x=function(){g((function(e){return!e})),l(r,"isCollapsed",!b)};return i.createElement(i.Fragment,null,i.createElement("div",{className:v.ActionButtons,onClick:function(){return C(!1)}},i.createElement("div",{className:v.Left},null==d?void 0:d.name),i.createElement("div",{className:v.Right},y&&i.createElement("span",null,i.createElement(c,null)),!y&&(b?i.createElement("span",{onClick:x},"UnCollapse"):i.createElement("span",{onClick:x},"Collapse")),i.createElement("span",{onClick:function(){s(d)}},"View Full Screen"),!y&&i.createElement("span",{className:"".concat(v.dragHandleButton," dragHandle"),style:{cursor:"move"}},i.createElement(h,null)),i.createElement("span",{className:v.Menu},i.createElement(a,{onClick:function(e){return function(e){e.stopPropagation(),C(!A)}(e)}}),A&&i.createElement("ul",{className:v.CustomMenu},y?i.createElement("li",{onClick:function(){N(!1),C(!1)}},i.createElement(D,null),"Unlock"):i.createElement("li",{onClick:function(){N(!0),C(!1)}},i.createElement(o,null),"Lock"))))),i.createElement("div",{className:"".concat(v.Content," ").concat(b?v.Collapse:""),onClick:function(){return C(!1)}},"ListAgent"===(null==d?void 0:d.name)?i.createElement(t,null):i.createElement("p",{style:{margin:"auto"}},(null==d?void 0:d.name)+" widget")))},E=function(e){var a,o=e.defaultLayout,t=e.widgetButtons,c=e.userId,h=e.setIsLoadingPopup,D=e.setIsFullScreen,E=e.padding,w=e.className,B=u(o),A=n(B,2),C=A[0],N=A[1],x=u({widgets:[],layout:o}),k=n(x,2),W=k[0],S=k[1],H=u(!1),L=n(H,2),P=L[0],I=L[1],R=u(0),G=n(R,2),M=G[0],z=G[1],F=u(!0),T=n(F,2),j=T[0],Y=T[1],U=_(null),J=u(window.innerWidth),q=n(J,2),Z=q[0],O=q[1];m((function(){U.current&&O(U.current.clientWidth);var e=function(){U.current&&O(U.current.clientWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[U.current]);var V=u({widgets:[],layout:o}),K=n(V,2),Q=K[0],X=K[1],$=u(!1),ee=n($,2),ne=ee[0],ae=ee[1],oe=u(!1),te=n(oe,2),de=te[0],re=te[1],le=u((null==W?void 0:W.widgets)||[]),se=n(le,2),ie=se[0],ue=se[1],_e=function(e,n,a){S((function(o){var t=o.widgets.map((function(o,t){return t===e?r(r({},o),{},l({},n,a)):r({},o)})),d=C.map((function(o,t){return t===e&&"isLocked"===n?r(r({},o),{},{isDraggable:!a,isResizable:!a}):t===e&&"isCollapsed"===n?r(r({},o),{},{isResizable:!a,h:a?1:8}):o}));return N(d),r(r({},o),{},{widgets:t})}))};m((function(){Y(!0),h(!0),d.get("/main-dashboard?userId=".concat(c)).then((function(e){var n,a,o=e.data;S(null==o?void 0:o.data),X(null==o?void 0:o.data),ue(null==o||null===(n=o.data)||void 0===n?void 0:n.widgets),N(null==o||null===(a=o.data)||void 0===a?void 0:a.layout)})).catch((function(e){var n;g.error((null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"Error getting layout..")})).finally((function(){Y(!1),setTimeout((function(){I(!1)}),100),h(!1)}))}),[M]);return i.createElement(i.Fragment,null,i.createElement("div",{className:"".concat(v.Dashboard," ").concat(w||""),style:{padding:E}},i.createElement("div",{className:v.Top},i.createElement("h2",null,"Create Or Manage Your Dashboard"),i.createElement("div",{className:v.Buttons},de?i.createElement("button",{onClick:function(){re(!1),S(Q),ue(null==Q?void 0:Q.widgets),N(null==Q?void 0:Q.layout),setTimeout((function(){I(!1)}),100)}},"Cancel"):i.createElement("button",{onClick:function(){return re(!0)}},"Manage Widgets"),P&&i.createElement(i.Fragment,null,ne?i.createElement("button",null,"Updating ...."):i.createElement("button",{onClick:function(){ae(!0),h(!0),d.post("/main-dashboard/create?userId=".concat(c),{widgets:null==W?void 0:W.widgets,layout:null==W?void 0:W.layout}).then((function(e){var n=e.data;g.success((null==n?void 0:n.message)||"Updated Successfully..."),z(Math.random()),re(!1)})).catch((function(e){var n;g.error((null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"Error Updating Dashboard layout..")})).finally((function(){ae(!1),I(!1),h(!1)}))}},"Save Layout")))),j?i.createElement(i.Fragment,null):i.createElement(i.Fragment,null,de&&i.createElement("div",{className:v.WidgetButtons},t.map((function(e,n){return i.createElement("div",{key:n,className:v.WidgetBtn},i.createElement("p",null,e),ie.some((function(n){return n.name===e}))?i.createElement("span",{className:v.CrossButton,onClick:function(){return n=e,ue((function(e){return e.filter((function(e){return e.name!==n}))})),void S((function(e){var a=e.widgets.filter((function(e){return e.name!==n})),o=C.filter((function(a,o){var t=e.widgets[o];return(null==t?void 0:t.name)!==n}));return N(o),r(r({},e),{},{widgets:a,layout:o})}));var n}},i.createElement("img",{src:f,alt:"Remove",title:"Remove"})):i.createElement("span",{className:v.Show,onClick:function(){return n={name:e,isLocked:!1,isCollapsed:!1},ue((function(e){return[].concat(s(e),[n])})),void S((function(e){var a=[].concat(s(null==e?void 0:e.widgets),[n]),o={i:"box".concat(a.length),x:0,y:1/0,w:6,h:8,isDraggable:!0,isResizable:!0},t=[].concat(s(C),[o]);return N(t),r(r({},e),{},{widgets:a,layout:t})}));var n}},i.createElement("img",{src:p,alt:"Add",title:"Add"})))}))),i.createElement("div",{className:v.Widgets,ref:U},W?i.createElement(b,{className:"layout",layout:C,cols:12,rowHeight:40,width:Z,draggableHandle:".dragHandle",onLayoutChange:function(e){N(e),S((function(n){return r(r({},n),{},{layout:e})})),I(!0)}},null==W||null===(a=W.widgets)||void 0===a?void 0:a.map((function(e,n){var a,o,t,d,l,s;return i.createElement("div",{key:"box".concat(n+1),className:v.gridItem,"data-grid":r(r({},C[n]),{},{isDraggable:null===(a=null===(o=C[n])||void 0===o?void 0:o.isDraggable)||void 0===a||a,isResizable:null===(t=null===(d=C[n])||void 0===d?void 0:d.isResizable)||void 0===t||t,static:!(null!==(l=C[n])&&void 0!==l&&l.isDraggable||null!==(s=C[n])&&void 0!==s&&s.isResizable)})},i.createElement(y,{item:e,index:n,onWidgetStateChange:_e,setIsFullScreen:D}))}))):i.createElement("h2",null,"Please create your dashboard By manage widgets")))))};export{E as default};
//# sourceMappingURL=Dashboard-ClWa-GiG.js.map
